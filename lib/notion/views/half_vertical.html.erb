<div class="view view--half_vertical">
  <% if defined?(error) && error %>
    <%= render 'plugins/notion/shared/error_section',
               title_class: "title title--small",
               title_text: "Notion Error",
               description_text: error %>
  <% elsif display_type == "database" %>
    <div class="layout layout--top">
      <% if items && items.any? %>
        <div class="columns" data-overflow-max-cols="1" data-overflow-counter="true">
          <div class="column">
            <% items.each_with_index do |item, idx| %>
              <%= render partial: 'plugins/notion/shared/database_item', locals: { item: item, index: idx, current_layout: "half_vertical", labeled_properties: labeled_properties, listed_properties: listed_properties, status_field: status_field } %>
            <% end %>
          </div>
        </div>
      <% else %>
        <%= render 'plugins/notion/shared/error_section',
                   title_class: "title title--small",
                   title_text: "No Content",
                   description_text: "Check your Notion configuration" %>
      <% end %>
    </div>
<% elsif display_type == "page" %>
    <div class="layout layout--top">
      <% if items && items[:blocks] && items[:blocks].any? %>
        <div class="columns" data-overflow-max-cols="1" data-overflow-counter="false">
          <div class="column">
            <% items[:blocks].each_with_index do |block, idx| %>
              <%= render 'plugins/notion/shared/page_block', block: block, index: idx, current_layout: "half_vertical", image_height: image_height %>
            <% end %>
          </div>
        </div>
      <% else %>
        <%= render 'plugins/notion/shared/error_section',
                   title_class: "title title--small",
                   title_text: "No Content",
                   description_text: "Check your Notion configuration" %>
      <% end %>
    </div>
  <% end %>

  <%= render partial: 'plugins/notion/shared/title_bar', locals: { instance_name: instance_name } %>
</div>